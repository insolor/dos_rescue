
include ../dos_rescue.ew as dos_rescue
-- include image.e

constant pal = {
    {0,0,0},{0,0,42},{0,42,0},{0,42,42},{42,0,0},{42,0,42},{42,21,0},{42,42,42},
    {21,21,21},{21,21,63},{21,63,21},{21,63,63},{63,21,21},{63,21,63},{63,63,21},{63,63,63},
    {0,0,0},{5,5,5},{8,8,8},{11,11,11},{14,14,14},{17,17,17},{20,20,20},{24,24,24},
    {28,28,28},{32,32,32},{36,36,36},{40,40,40},{45,45,45},{50,50,50},{56,56,56},{63,63,63},
    {0,0,63},{16,0,63},{31,0,63},{47,0,63},{63,0,63},{63,0,47},{63,0,31},{63,0,16},
    {63,0,0},{63,16,0},{63,31,0},{63,47,0},{63,63,0},{47,63,0},{31,63,0},{16,63,0},
    {0,63,0},{0,63,16},{0,63,31},{0,63,47},{0,63,63},{0,47,63},{0,31,63},{0,16,63},
    {31,31,63},{39,31,63},{47,31,63},{55,31,63},{63,31,63},{63,31,55},{63,31,47},{63,31,39},
    {63,31,31},{63,39,31},{63,47,31},{63,55,31},{63,63,31},{55,63,31},{47,63,31},{39,63,31},
    {31,63,31},{31,63,39},{31,63,47},{31,63,55},{31,63,63},{31,55,63},{31,47,63},{31,39,63},
    {45,45,63},{49,45,63},{54,45,63},{58,45,63},{63,45,63},{63,45,58},{63,45,54},{63,45,49},
    {63,45,45},{63,49,45},{63,54,45},{63,58,45},{63,63,45},{58,63,45},{54,63,45},{49,63,45},
    {45,63,45},{45,63,49},{45,63,54},{45,63,58},{45,63,63},{45,58,63},{45,54,63},{45,49,63},
    {0,0,28},{7,0,28},{14,0,28},{21,0,28},{28,0,28},{28,0,21},{28,0,14},{28,0,7},
    {28,0,0},{28,7,0},{28,14,0},{28,21,0},{28,28,0},{21,28,0},{14,28,0},{7,28,0},
    {0,28,0},{0,28,7},{0,28,14},{0,28,21},{0,28,28},{0,21,28},{0,14,28},{0,7,28},
    {0,0,0},{1,0,0},{2,1,1},{3,1,1},{4,2,2},{5,2,2},{6,3,3},{7,3,3},
    {8,4,4},{9,4,4},{10,5,5},{11,5,5},{12,6,6},{13,6,6},{14,7,7},{15,7,7},
    {16,7,7},{17,7,7},{18,6,6},{19,6,6},{20,5,5},{21,5,5},{22,4,4},{23,4,4},
    {24,3,3},{25,3,3},{26,2,2},{27,2,2},{28,1,1},{29,1,1},{30,0,0},{31,0,0},
    {32,0,0},{33,1,0},{34,2,0},{35,3,0},{36,4,0},{37,5,0},{38,6,0},{39,7,0},
    {40,8,0},{41,9,0},{42,10,0},{43,11,0},{44,12,0},{45,13,0},{46,14,0},{47,15,0},
    {48,16,0},{49,17,0},{50,18,0},{51,19,0},{52,20,0},{53,21,0},{54,22,0},{55,23,0},
    {56,24,0},{57,25,0},{58,26,0},{59,27,0},{60,28,0},{61,29,0},{62,30,0},{63,31,0},
    {63,32,0},{63,33,1},{63,34,2},{63,35,3},{63,36,4},{63,37,5},{63,38,6},{63,39,7},
    {63,40,8},{63,41,9},{63,42,10},{63,43,11},{63,44,12},{63,45,13},{63,46,14},{63,47,15},
    {63,48,16},{63,49,17},{63,50,18},{63,51,19},{63,52,20},{63,53,21},{63,54,22},{63,55,23},
    {63,56,24},{63,57,25},{63,58,26},{63,59,27},{63,60,28},{63,61,29},{63,62,30},{63,63,31},
    {63,63,32},{63,63,33},{63,63,34},{63,63,35},{63,63,36},{63,63,37},{63,63,38},{63,63,39},
    {63,63,40},{63,63,41},{63,63,42},{63,63,43},{63,63,44},{63,63,45},{63,63,46},{63,63,47},
    {63,63,48},{63,63,49},{63,63,50},{63,63,51},{63,63,52},{63,63,53},{63,63,54},{63,63,55},
    {63,63,56},{63,63,57},{63,63,58},{63,63,59},{63,63,60},{63,63,61},{63,63,62},{63,63,63}
}

if graphics_mode(19) then
end if

procedure show_palette(sequence xy0, integer first, integer last, integer width)
    sequence xy
    for i = first to last by width do
        for j = 0 to width-1 do
            xy = xy0 + {j*8,floor((i-first)/width)*8}
            display_image(xy,repeat(repeat(i+j,7),7))
        end for
    end for
end procedure

dos_rescue:clear_screen()
dos_rescue:puts(1,"Standard palette")
show_palette({0,8},0,255,16)

if dos_rescue:getc(0) then
end if

dos_rescue:clear_screen()
dos_rescue:puts(1,"Standard palette\n")
dos_rescue:puts(1,"from 32nd color by 24 colors per line")
show_palette({0,16},32,247,24)

if dos_rescue:getc(0) then
end if

dos_rescue:clear_screen()
all_palette(pal)
dos_rescue:puts(1,"Custom palette")
show_palette({0,8},0,255,16)

if dos_rescue:getc(0) then
end if

if graphics_mode(-1) then
end if
